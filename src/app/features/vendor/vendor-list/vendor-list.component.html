<div class="vendor-list-page"> <!-- Overall page container -->

    <header class="page-header">
      <h1>{{ 'VENDOR.LIST.TITLE' | translate }}</h1>
      <button mat-raised-button color="primary" (click)="addVendor()" class="add-vendor-button">
        <mat-icon>add</mat-icon>
        {{ 'VENDOR.LIST.ADD_BUTTON' | translate }}
      </button>
    </header>
  
    <!-- Filter Section using Expansion Panel -->
    <mat-expansion-panel class="filter-panel" [expanded]="isFilterPanelExpanded" (opened)="isFilterPanelExpanded = true" (closed)="isFilterPanelExpanded = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ 'VENDOR.FILTER.TITLE' | translate }}
        </mat-panel-title>
        <mat-panel-description fxLayoutAlign="end center">
          <span *ngIf="areFiltersActive()" class="filter-active-indicator" matTooltip="{{ 'VENDOR.FILTER.ACTIVE_TOOLTIP' | translate }}">
            <mat-icon color="accent">filter_list</mat-icon>
            {{ 'VENDOR.FILTER.ACTIVE' | translate }}
          </span>
          <span *ngIf="!areFiltersActive()">
            {{ 'VENDOR.FILTER.CLICK_TO_EXPAND' | translate }}
          </span>
        </mat-panel-description>
      </mat-expansion-panel-header>
  
      <form [formGroup]="filterForm" class="filter-form-content">
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>{{ 'VENDOR.FILTER.VENDOR_CODE' | translate }}</mat-label>
          <input matInput formControlName="vendorCode" placeholder="{{ 'VENDOR.FILTER.PLACEHOLDER_CODE' | translate }}">
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>{{ 'VENDOR.FILTER.NAME' | translate }}</mat-label>
          <input matInput formControlName="name" placeholder="{{ 'VENDOR.FILTER.PLACEHOLDER_NAME' | translate }}">
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>{{ 'VENDOR.FILTER.EMAIL' | translate }}</mat-label>
          <input matInput formControlName="email" placeholder="{{ 'VENDOR.FILTER.PLACEHOLDER_EMAIL' | translate }}">
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>{{ 'VENDOR.FILTER.PHONE' | translate }}</mat-label>
          <input matInput formControlName="phone" placeholder="{{ 'VENDOR.FILTER.PLACEHOLDER_PHONE' | translate }}">
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>{{ 'VENDOR.FILTER.STATUS' | translate }}</mat-label>
          <mat-select formControlName="isActive">
            <mat-option *ngFor="let status of statusFilterOptions" [value]="status.value">
              {{ status.viewValueKey | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field>
  
        <div class="filter-actions">
          <button mat-stroked-button (click)="clearFilters()" type="button">
            <mat-icon>clear_all</mat-icon>
            {{ 'COMMON.CLEAR_FILTERS' | translate }}
          </button>
          <!-- Optional: Manual Apply Button if not using auto-apply on change -->
          <!-- <button mat-flat-button color="primary" (click)="applyFiltersManually()" type="button">
            <mat-icon>search</mat-icon>
            {{ 'COMMON.APPLY_FILTERS' | translate }}
          </button> -->
        </div>
      </form>
    </mat-expansion-panel>
  
    <!-- Main Content Area (Table) -->
    <div class="table-content-area mat-elevation-z4">
      <!-- Loading Spinner Overlay for Table -->
      <div *ngIf="isLoading" class="table-spinner-overlay">
        <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
      </div>
  
      <div class="table-container"> <!-- This div will handle table scrolling -->
        <table mat-table [dataSource]="dataSource" matSort attr.aria-label="{{ 'VENDOR.TABLE.ARIA_LABEL' | translate }}">
          <!-- Vendor Code Column -->
          <ng-container matColumnDef="vendorCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'VENDOR.TABLE.HEADER_CODE' | translate }}</th>
            <td mat-cell *matCellDef="let vendor">{{ vendor.vendorCode }}</td>
          </ng-container>
  
          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'VENDOR.TABLE.HEADER_NAME' | translate }}</th>
            <td mat-cell *matCellDef="let vendor">{{ vendor.name }}</td>
          </ng-container>
  
          <!-- Email Column -->
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'VENDOR.TABLE.HEADER_EMAIL' | translate }}</th>
            <td mat-cell *matCellDef="let vendor">{{ vendor.email }}</td>
          </ng-container>
  
          <!-- Phone Column -->
          <ng-container matColumnDef="phone">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="phone">{{ 'VENDOR.TABLE.HEADER_PHONE' | translate }}</th>
            <td mat-cell *matCellDef="let vendor">{{ vendor.phone || '-' }}</td>
          </ng-container>
  
          <!-- IsActive Column -->
          <ng-container matColumnDef="isActive">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="isActive">{{ 'VENDOR.TABLE.HEADER_STATUS' | translate }}</th>
            <td mat-cell *matCellDef="let vendor">
              <span [ngClass]="{'status-active': vendor.isActive, 'status-inactive': !vendor.isActive}">
                {{ (vendor.isActive ? 'VENDOR.STATUS.ACTIVE' : 'VENDOR.STATUS.INACTIVE') | translate }}
              </span>
            </td>
          </ng-container>
  
          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>{{ 'VENDOR.TABLE.HEADER_ACTIONS' | translate }}</th>
            <td mat-cell *matCellDef="let vendor" class="actions-cell">
              <button mat-icon-button color="primary" (click)="editVendor(vendor)"
                      attr.aria-label="{{ 'VENDOR.ACTIONS.EDIT' | translate }}" matTooltip="{{'VENDOR.ACTIONS.EDIT' | translate}}">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" (click)="deleteVendor(vendor)"
                      attr.aria-label="{{ 'VENDOR.ACTIONS.DELETE' | translate }}" matTooltip="{{'VENDOR.ACTIONS.DELETE' | translate}}">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr> <!-- Sticky header -->
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  

          <tr class="mat-row-no-data"  *matNoDataRow>
            <td class="mat-cell-no-data" [attr.colspan]="displayedColumns.length">
              <ng-container *ngIf="!isLoading">
                {{ 'COMMON.NO_DATA' | translate }}
              </ng-container>
            </td>
          </tr>

        </table>
      </div>
  
      <mat-paginator [length]="totalElements"
                     [pageSizeOptions]="[5, 10, 25, 50, 100]"
                     showFirstLastButtons
                     attr.aria-label="{{ 'VENDOR.PAGINATOR.ARIA_LABEL' | translate }}">
      </mat-paginator>
    </div>
  
  </div>